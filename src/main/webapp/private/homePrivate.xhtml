<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>Facelet Title</title>
        <h:outputStylesheet library="css" name="jsfcrud.css"/>
        <h:outputScript library="js" name="jsfcrud.js"/>
        <!-- SCRIPT DE REQUISICAO DO FACEBOOK -->
        <script>
            fb_root(document, 'script', 'facebook-jssdk');
        </script>
    </h:head>
    <h:body>
        <p:layout fullPage="true">
            <p:layoutUnit position="north">
                <h:form id="menuForm">
                    <!-- BARRA DE MENUS PRINCIPAL-->
                    <p:menubar>
                        <p:submenu label="MANUTENÇÃO" rendered="#{usuarioSessionController.admin}">

                            <p:menuitem value="Acesso" outcome="./administrador/acesso/List.xhtml" />
                            <p:menuitem value="NivelAcesso" outcome="./administrador/nivelAcesso/List.xhtml" />
                            <p:menuitem value="NivelQuestao" outcome="./administrador/nivelQuestao/List.xhtml" />
                            <p:menuitem value="TipoQuestao" outcome="./administrador/tipoQuestao/List.xhtml" />
                            <p:menuitem value="Usuario" outcome="./administrador/usuario/List.xhtml" />

                        </p:submenu>
                        <p:submenu label="CONTEÚDO">

                            <p:menuitem value="AplicacaoFrase" outcome="./professor/aplicacaoFrase/List.xhtml" />
                            <p:menuitem value="Caso" outcome="./professor/caso/List.xhtml" />
                            <p:menuitem value="CasoAplicado" outcome="./professor/casoAplicado/List.xhtml" />
                            <p:menuitem value="ClassificacaoGramatical" outcome="./professor/classificacaoGramatical/List.xhtml" />
                            <p:menuitem value="Declinacao" outcome="./professor/declinacao/List.xhtml" />
                            <p:menuitem value="DeclinacaoAplicada" outcome="./professor/declinacaoAplicada/List.xhtml" />
                            <p:menuitem value="FraseLatim" outcome="./professor/fraseLatim/List.xhtml" />
                            <p:menuitem value="FrasePortugues" outcome="./professor/frasePortugues/List.xhtml" />
                            <p:menuitem value="IndicadorPessoaGramatical" outcome="./professor/indicadorPessoaGramatical/List.xhtml" />
                            <p:menuitem value="IndicadorTempoVerbal" outcome="./professor/indicadorTempoVerbal/List.xhtml" />
                            <p:menuitem value="PalavraLatim" outcome="./professor/palavraLatim/List.xhtml" />
                            <p:menuitem value="PalavraPortugues" outcome="./professor/palavraPortugues/List.xhtml" />
                            <p:menuitem value="PalavrasClassificadas" outcome="./professor/palavrasClassificadas/List.xhtml" />
                            <p:menuitem value="PalavrasDeclinadas" outcome="./professor/palavrasDeclinadas/List.xhtml" />
                            <p:menuitem value="PessoaGramatical" outcome="./professor/pessoaGramatical/List.xhtml" />
                            <p:menuitem value="Radical" outcome="./professor/radical/List.xhtml" />
                            <p:menuitem value="TempoVerbal" outcome="./professor/tempoVerbal/List.xhtml" />
                            <p:menuitem value="TraduzFrase" outcome="./professor/traduzFrase/List.xhtml" />
                            <p:menuitem value="TraduzPalavra" outcome="./professor/traduzPalavra/List.xhtml" />
                            <p:menuitem value="VideosPostagem" outcome="./professor/videosPostagem/List.xhtml" />

                        </p:submenu>
                        <p:submenu label="ATIVIDADES">

                            <p:menuitem value="AtividadeQuestao" outcome="./professor/atividadeQuestao/List.xhtml" />
                            <p:menuitem value="Lacuna" outcome="./professor/lacuna/List.xhtml" />
                            <p:menuitem value="LinksQuestao" outcome="./administrador/linksQuestao/List.xhtml" />
                            <p:menuitem value="ListaQuestao" outcome="./administrador/listaQuestao/List.xhtml" />
                            <p:menuitem value="QuestaoDeclinacao" outcome="./professor/questaoDeclinacao/List.xhtml" />
                            <p:menuitem value="QuestaoGramatical" outcome="./professor/questaoGramatical/List.xhtml" />
                            <p:menuitem value="QuestaoLacuna" outcome="./professor/questaoLacuna/List.xhtml" />
                            <p:menuitem value="QuestaoTraduzFrase" outcome="./professor/questaoTraduzFrase/List.xhtml" />
                            <p:menuitem value="QuestaoTraduzPalavra" outcome="./professor/questaoTraduzPalavra/List.xhtml" />

                        </p:submenu>
                        <p:submenu label="MULTIMÍDIA">

                            <p:menuitem value="Videos" outcome="./professor/videos/List.xhtml" />

                        </p:submenu>
                        <f:facet name="options">
                            <p:commandButton value="Sair" ajax="false" action="#{usuarioSessionController.doLogout()}"/>
                        </f:facet>
                    </p:menubar>
                </h:form>
            </p:layoutUnit>
            <!-- CENTRO DA PÁGINA-->
            <p:layoutUnit position="center">

                <f:facet name="header">
                    <p:commandButton id="createButton" icon="ui-icon-plus"   value="#{bundle.Create}" actionListener="#{postagemController.prepareCreate}" update=":PostagemCreateForm" oncomplete="PF('PostagemCreateDialog').show()"/>
                </f:facet>

                <h:form id="PostagemListForm">                    

                    <p:dataGrid id="datalist"  value="#{postagemController.timeLine}" var="itemAtual" columns="1" emptyMessage="Nenhuma postagem adicionada" paginator="true" rows="20">

                        <p:panel header="#{itemAtual.titulo}" toggleable="true" toggleTitle="Detalhes" collapsed="true">

                            <h:outputText value="#{itemAtual.conteudo}" escape="false"/>
                            <p:dataGrid value="#{itemAtual.videosPostagems}" var="videosAtuais" emptyMessage="Nenhum vídeos para esta postagem" columns="1" paginator="true" rows="1">
                                <p:panel footer="#{videosAtuais.videos.descricao}">
                                    <center>
                                        <p:media value="#{videosAtuais.videos.link}" width="600" height="400" player="flash"/>                                      
                                    </center>
                                </p:panel>
                            </p:dataGrid>                

                            <f:facet name="actions">  
                                <h:outputFormat value="#{itemAtual.data}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputFormat>                        
                            </f:facet>   

                            <f:facet name="footer" rendered="#{itemAtual.usuario!= usuarioSessionController.selected.id}">

                                <p:outputLabel value="Autor: #{usuarioSessionController.getUsuario(itemAtual.usuario).nome}"/>
                                <p:outputLabel value=" | "/>
                                <p:commandLink value="Excluir" action="#{postagemController.destroy()}"  update="datalist">
                                    <f:setPropertyActionListener target="#{postagemController.selected}" value="#{itemAtual}"/>
                                </p:commandLink>
                                <p:outputLabel value=" | "/>
                                <p:commandLink value="#{bundle.Edit}" update=":PostagemEditForm" oncomplete="PF('PostagemEditDialog').show()">
                                    <f:setPropertyActionListener target="#{postagemController.selected}" value="#{itemAtual}"/>
                                </p:commandLink>

                            </f:facet>
                        </p:panel>                                 
                    </p:dataGrid>                                    
                </h:form>        
                <!-- FACEBOOK -->
                <div class="fb-facepile"
                     data-href="https://www.facebook.com/FacebookDevelopers"
                     data-max-rows="1"
                     data-colorscheme="light"
                     data-size="medium"
                     data-show-count="true">                         
                </div>
            </p:layoutUnit>
        </p:layout>
        <!-- INCLUDES PARA POSTAGEM -->
        <ui:include src="/private/professor/postagem/Create.xhtml"/>
        <ui:include src="/private/professor/postagem/Edit.xhtml"/>
        <ui:include src="/private/professor/postagem/View.xhtml"/>
    </h:body>
</html>

