<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>#{bundle.TituloInicio}</title>

        <h:outputStylesheet library="css" name="jsfcrud.css"/>
        <h:outputStylesheet library="css" name="primefaces.css"/>
        <h:outputStylesheet library="css" name="customHTML.css"/>
        <h:outputStylesheet library="css" name="defaultHTML.css"/>

        <h:outputStylesheet library="css" name="bootstrap-theme.css"/>
        <h:outputStylesheet library="css" name="bootstrap-theme.min.css"/>
        <h:outputStylesheet library="css" name="bootstrap.css"/>
        <h:outputStylesheet library="css" name="bootstrap.min.css"/>

        <h:outputScript library="js" name="bootstrap.js"/>
        <h:outputScript library="js" name="bootstrap.min.js"/>

        <h:outputScript library="js" name="jsfcrud.js"/>
        <!-- SCRIPT DE REQUISICAO DO FACEBOOK -->
        <script>
            fb_root(document, 'script', 'facebook-jssdk');
        </script>        
    </h:head>
    <h:body id="body-page" style="padding-top: 70px">
        <p:layout fullPage="true">
            <p:layoutUnit position="north">
                <nav class="navbar navbar-default navbar-fixed-top" role="navigation">                
                    <h:link outcome="#{bundle.MenuInicio}">
                        <h:graphicImage library="images" name="layout/BRASAO-UFRPE.jpg" width="54" height="70"/>                    
                    </h:link>
                    <p:outputLabel value="Seja bem-vindo(a) #{usuarioSessionController.selected.nome}"/>                    
                </nav>
                <h:form id="menuForm">
                    <!-- BARRA DE MENUS PRINCIPAL-->
                    <p:menubar>                        
                        <p:submenu label="#{bundle.MenuTituloManutencao}" rendered="#{usuarioSessionController.admin}">

                            <p:menuitem value="#{bundle.MenusListaAcessos}" outcome="./administrador/acesso/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusNiveisAcesso}" outcome="./administrador/nivelAcesso/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusNiveisQuestao}" outcome="./administrador/nivelQuestao/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusTiposQuestao}" outcome="./administrador/tipoQuestao/List.xhtml" />
                            <p:separator style="height: 2px"/>
                            <p:menuitem value="#{bundle.MenusListaUsuarios}" outcome="./administrador/usuario/List.xhtml" />

                        </p:submenu>
                        <p:submenu label="#{bundle.MenusConteudo}">

                            <p:menuitem value="#{bundle.MenusCasosLatinos}" outcome="./professor/caso/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusClassificacaoGramatical}" outcome="./professor/classificacaoGramatical/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusDeclinacao}" outcome="./professor/declinacao/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusFraseLatim}" outcome="./professor/fraseLatim/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusFrasePortugues}" outcome="./professor/frasePortugues/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusPalavraLatim}" outcome="./professor/palavraLatim/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusPalavraPortugues}" outcome="./professor/palavraPortugues/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusPessoaGramatical}" outcome="./professor/pessoaGramatical/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusTempoVerbal}" outcome="./professor/tempoVerbal/List.xhtml" />

                        </p:submenu>

                        <p:submenu label="#{bundle.MenusTraducao}">
                            <p:menuitem value="#{bundle.MenusTraducaoFrase}" outcome="./professor/traduzFrase/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusTraducaoPalavra}" outcome="./professor/traduzPalavra/List.xhtml" />                            
                        </p:submenu>

                        <p:submenu label="#{bundle.MenusGramatica}">
                            <p:menuitem value="#{bundle.MenusAplicacaoFrase}" outcome="./professor/aplicacaoFrase/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusAplicacaoCaso}" outcome="./professor/casoAplicado/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusAplicacaoDeclinacao}" outcome="./professor/declinacaoAplicada/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusIndicadorPessoaGramatical}" outcome="./professor/indicadorPessoaGramatical/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusIndicadorTempoVerbal}" outcome="./professor/indicadorTempoVerbal/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusClassificacaoPalavras}" outcome="./professor/palavrasClassificadas/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusDeclinacaoPalavras}" outcome="./professor/palavrasDeclinadas/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusRadical}" outcome="./professor/radical/List.xhtml" />
                        </p:submenu>

                        <p:submenu label="#{bundle.MenusAtividade}">

                            <p:menuitem value="AtividadeQuestao (pendente)" outcome="./professor/atividadeQuestao/List.xhtml" />
                            <p:menuitem value="Lacuna (pendente)" outcome="./professor/lacuna/List.xhtml" />
                            <p:menuitem value="LinksQuestao (pendente)" outcome="./administrador/linksQuestao/List.xhtml" />
                            <p:menuitem value="ListaQuestao (pendente)" outcome="./administrador/listaQuestao/List.xhtml" />

                        </p:submenu>

                        <p:submenu label="#{bundle.MenusQuestoes}">

                            <p:menuitem value="#{bundle.MenusQuestaoLacuna}" outcome="./professor/questaoLacuna/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusQuestaoTraduzFrase}" outcome="./professor/questaoTraduzFrase/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusQuestaoTraduzPalavra}" outcome="./professor/questaoTraduzPalavra/List.xhtml" />

                        </p:submenu>

                        <p:submenu label="#{bundle.MenusMultimidia}">

                            <p:menuitem value="#{bundle.MenusVideo}" outcome="./professor/videos/List.xhtml" />

                        </p:submenu>

                        <f:facet name="options">

                            <p:commandButton icon="ui-icon-plus" title="Aumentar fonte"/>
                            <p:spacer width="48" height="10"/>
                            <p:menuButton value="#{bundle.MenusBotaoPerfil}">
                                <p:menuitem value="#{bundle.MenusAtualizarPerfil}" outcome="./professor/perfil/Perfil.xhtml"/>
                                <p:menuitem value="#{bundle.CampoRedefinirSenha}" outcome="./professor/senha/Redefinir.xhtml"/>
                                <p:separator/>
                                <p:menuitem value="#{bundle.AcaoSair}" ajax="false" action="#{usuarioSessionController.doLogout()}"/>
                            </p:menuButton>
                        </f:facet>

                    </p:menubar>
                </h:form>
            </p:layoutUnit>
            <!-- CENTRO DA PÁGINA-->
            <p:layoutUnit position="center" styleClass="jumbotron">
                <div class="col-md-3 jumbotron">
                    <p:commandButton id="createButton" value="#{bundle.AcaoNovaPostagem}" actionListener="#{postagemController.prepareCreate}" update=":PostagemCreateForm" oncomplete="PF('PostagemCreateDialog').show()"/>
                    <hr/>
                    <ul class="nav nav-pills nav-stacked">
                        <li class="active">
                            <a>
                                #{acessoController.selected.acessos} hoje, #{acessoController.totalAcessos()} acessos até o momento.
                            </a>
                        </li>
                        <li>
                            <a>
                                Minhas postagens: <span class="badge pull-right">10</span>
                            </a> 
                        </li>
                        <li>
                            <a>
                                Veus vídeos: <span class="badge pull-right">10</span>                                
                            </a>
                        </li>
                        <li>
                            <a>
                                Postagens no ARUAGI: <span class="badge pull-right">#{postagemController.timeLine.size()}</span>                                
                            </a>
                        </li>
                    </ul>
                    <ul class="nav nav-pills nav-stacked">
                        <li class="active">
                            <a>
                                Redes sociais
                            </a>
                        </li>
                    </ul>
                    <div class="fb-like-box"
                         data-href="https://www.facebook.com/pages/Aruagi-Ensino-de-L%C3%ADngua-Latina/553025198136554"
                         data-colorscheme="light"
                         data-show-faces="true"
                         data-header="false"
                         data-stream="true"
                         data-show-border="false">                             
                    </div>
                </div>
                <h:form id="PostagemListForm" class="col-md-9" >                    
                    <p:dataScroller id="datalist" style="border: none" value="#{postagemController.timeLine}" var="itemAtual" chunkSize="10">
                        <p:panel toggleable="true" toggleTitle="Detalhes" collapsed="true">
                            <f:facet name="header" class="panel-heading">
                                <p:outputLabel value="#{itemAtual.titulo}"/>
                            </f:facet>
                            <f:facet name="actions">
                                <span class="badge pull-right">#{itemAtual.videosPostagems.size()}</span>
                            </f:facet>
                            <h:outputText value="#{itemAtual.conteudo}" escape="false" styleClass="panel-body"/>
                            <br/>
                            <p:panel collapsed="true" toggleable="true" header="Vídeos" style="border: none" rendered="#{!itemAtual.videosPostagems.isEmpty()}">                                

                                <p:dataGrid id="videosDatalist" style="border: none" value="#{itemAtual.videosPostagems}" var="vpa" emptyMessage="Nenhum vídeos para esta postagem" paginator="true" columns="1" rows="1">
                                    <div>
                                        <center>
                                            <iframe
                                                src="//www.youtube.com/embed/#{vpa.videos.link}?feature=player_embedded"
                                                frameborder="0"
                                                allowfullscreen="true">
                                            </iframe>   
                                        </center>
                                        <div class="caption">
                                            <center>
                                                <h4>Observações</h4>
                                                <h:outputText value="#{vpa.videos.descricao}"/>
                                                <hr/>
                                                <p:commandButton value="#{bundle.AcaoExcluir}" action="#{videosPostagemController.destroy}" update=":PostagemListForm:datalist">
                                                    <f:setPropertyActionListener target="#{videosPostagemController.selected}" value="#{vpa}"/>
                                                </p:commandButton> 
                                            </center>
                                        </div>
                                    </div>
                                </p:dataGrid >
                            </p:panel>

                            <f:facet name="footer" rendered="#{itemAtual.usuario!= usuarioSessionController.selected.id}">
                                <div class="btn-group">
                                    <p:commandButton styleClass="btn btn-default" value="#{bundle.AcaoExcluir}" icon="ui-icon-trash" action="#{postagemController.destroy}"  update=":PostagemListForm:datalist" disabled="#{itemAtual.usuario!=usuarioSessionController.selected.id}">
                                        <f:setPropertyActionListener target="#{postagemController.selected}" value="#{itemAtual}"/>
                                    </p:commandButton>
                                    <p:commandButton styleClass="btn btn-default" value="#{bundle.AcaoEditar}" icon="ui-icon-pencil" update=":PostagemEditForm" oncomplete="PF('PostagemEditDialog').show()" disabled="#{itemAtual.usuario!=usuarioSessionController.selected.id}">
                                        <f:setPropertyActionListener target="#{postagemController.selected}" value="#{itemAtual}"/>
                                    </p:commandButton>
                                    <p:commandButton styleClass="btn btn-default" value="Videos" icon="ui-icon-plus" actionListener="#{videosPostagemController.prepareCreate}" update=":VideosPostagemCreateForm" oncomplete="PF('VideosPostagemCreateDialog').show()" disabled="#{itemAtual.usuario!=usuarioSessionController.selected.id}">
                                        <f:setPropertyActionListener target="#{videosPostagemController.selected.postagem}" value="#{itemAtual}"/>
                                    </p:commandButton>
                                </div>
                                <div class="pull-right">
                                    <p:outputLabel value="Autor: #{usuarioSessionController.getUsuario(itemAtual.usuario).nome} em "/>
                                    <h:outputFormat value="#{itemAtual.data}">
                                        <f:convertDateTime pattern="dd/MM/yyyy"/>
                                    </h:outputFormat>                                                        
                                </div>
                            </f:facet>
                        </p:panel>  
                        <hr/>
                    </p:dataScroller> 
                </h:form>        
            </p:layoutUnit>
        </p:layout>        
        <!-- INCLUDES PARA POSTAGEM -->
        <ui:include src="/private/professor/postagem/Create.xhtml"/>
        <ui:include src="/private/professor/postagem/Edit.xhtml"/>
        <ui:include src="/private/professor/postagem/View.xhtml"/>
        <ui:include src="/private/professor/videosPostagem/Create.xhtml"/>         
    </h:body>
</html>

