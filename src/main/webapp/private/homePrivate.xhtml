<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>#{bundle.TituloInicio}</title>
        <h:outputStylesheet library="css" name="jsfcrud.css"/>
        <h:outputScript library="js" name="jsfcrud.js"/>
        <!-- SCRIPT DE REQUISICAO DO FACEBOOK -->
        <script>
            fb_root(document, 'script', 'facebook-jssdk');
        </script>
    </h:head>
    <h:body>
        <p:layout fullPage="true">
            <p:layoutUnit position="north" header="Seja bem-vindo(a) #{usuarioSessionController.selected.nome}">

                <h:form id="menuForm">
                    <!-- BARRA DE MENUS PRINCIPAL-->
                    <p:menubar>                        
                        <p:menuitem>
                            <h:link outcome="#{bundle.MenuInicio}">
                                <h:graphicImage library="images" name="layout/BRASAO-UFRPE.jpg" width="20" height="23"/>                    
                            </h:link> 
                        </p:menuitem>
                        <p:submenu label="#{bundle.MenuTituloManutencao}" rendered="#{usuarioSessionController.admin}">

                            <p:menuitem value="#{bundle.MenusListaAcessos}" outcome="./administrador/acesso/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusNiveisAcesso}" outcome="./administrador/nivelAcesso/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusNiveisQuestao}" outcome="./administrador/nivelQuestao/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusTiposQuestao}" outcome="./administrador/tipoQuestao/List.xhtml" />
                            <p:separator/>
                            <p:menuitem value="#{bundle.MenusListaUsuarios}" outcome="./administrador/usuario/List.xhtml" />

                        </p:submenu>
                        <p:submenu label="#{bundle.MenusConteudo}">

                            <p:menuitem value="#{bundle.MenusCasosLatinos}" outcome="./professor/caso/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusClassificacaoGramatical}" outcome="./professor/classificacaoGramatical/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusDeclinacao}" outcome="./professor/declinacao/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusFraseLatim}" outcome="./professor/fraseLatim/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusFrasePortugues}" outcome="./professor/frasePortugues/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusPalavraLatim}" outcome="./professor/palavraLatim/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusPalavraPortugues}" outcome="./professor/palavraPortugues/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusPessoaGramatical}" outcome="./professor/pessoaGramatical/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusTempoVerbal}" outcome="./professor/tempoVerbal/List.xhtml" />

                        </p:submenu>

                        <p:submenu label="#{bundle.MenusTraducao}">
                            <p:menuitem value="#{bundle.MenusTraducaoFrase}" outcome="./professor/traduzFrase/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusTraducaoPalavra}" outcome="./professor/traduzPalavra/List.xhtml" />                            
                        </p:submenu>

                        <p:submenu label="#{bundle.MenusGramatica}">
                            <p:menuitem value="#{bundle.MenusAplicacaoFrase}" outcome="./professor/aplicacaoFrase/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusAplicacaoCaso}" outcome="./professor/casoAplicado/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusAplicacaoDeclinacao}" outcome="./professor/declinacaoAplicada/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusIndicadorPessoaGramatical}" outcome="./professor/indicadorPessoaGramatical/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusIndicadorTempoVerbal}" outcome="./professor/indicadorTempoVerbal/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusClassificacaoPalavras}" outcome="./professor/palavrasClassificadas/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusDeclinacaoPalavras}" outcome="./professor/palavrasDeclinadas/List.xhtml" />
                            <p:menuitem value="#{bundle.MenusRadical}" outcome="./professor/radical/List.xhtml" />
                        </p:submenu>

                        <p:submenu label="#{bundle.MenusAtividade}">

                            <p:menuitem value="AtividadeQuestao (pendente)" outcome="./professor/atividadeQuestao/List.xhtml" />
                            <p:menuitem value="Lacuna (pendente)" outcome="./professor/lacuna/List.xhtml" />
                            <p:menuitem value="LinksQuestao (pendente)" outcome="./administrador/linksQuestao/List.xhtml" />
                            <p:menuitem value="ListaQuestao (pendente)" outcome="./administrador/listaQuestao/List.xhtml" />
                            <p:menuitem value="QuestaoDeclinacao" outcome="./professor/questaoDeclinacao/List.xhtml" />
                            <p:menuitem value="QuestaoGramatical" outcome="./professor/questaoGramatical/List.xhtml" />
                            <p:menuitem value="QuestaoLacuna (pendente)" outcome="./professor/questaoLacuna/List.xhtml" />
                            <p:menuitem value="QuestaoTraduzFrase" outcome="./professor/questaoTraduzFrase/List.xhtml" />
                            <p:menuitem value="QuestaoTraduzPalavra" outcome="./professor/questaoTraduzPalavra/List.xhtml" />

                        </p:submenu>
                        <p:submenu label="#{bundle.MenusMultimidia}">

                            <p:menuitem value="#{bundle.MenusVideo}" outcome="./professor/videos/List.xhtml" />

                        </p:submenu>

                        <f:facet name="options">

                            <p:commandButton icon="ui-icon-plus" title="Aumentar fonte"/>
                            <p:commandButton icon="ui-icon-minus" title="Diminuir fonte"/>
                            <p:commandButton icon="ui-icon-x" title="Auto-contraste"/>
                            <p:spacer width="48" height="10"/>
                            <p:menuButton value="#{bundle.MenusBotaoPerfil}">
                                <p:menuitem value="#{bundle.MenusAtualizarPerfil}" outcome="./professor/perfil/Perfil.xhtml"/>
                                <p:menuitem value="#{bundle.CampoRedefinirSenha}" outcome="./professor/senha/Redefinir.xhtml"/>
                                <p:separator/>
                                <p:menuitem value="#{bundle.AcaoSair}" ajax="false" action="#{usuarioSessionController.doLogout()}"/>
                            </p:menuButton>
                        </f:facet>

                    </p:menubar>
                </h:form>
            </p:layoutUnit>
            <!-- CENTRO DA PÁGINA-->
            <p:layoutUnit position="center" footer="#{acessoController.selected.acessos} hoje, #{acessoController.totalAcessos()} acessos até o momento">

                <f:facet name="header">
                    <p:commandButton id="createButton" icon="ui-icon-plus"   value="#{bundle.AcaoNovo}" actionListener="#{postagemController.prepareCreate}" update=":PostagemCreateForm" oncomplete="PF('PostagemCreateDialog').show()"/>
                </f:facet>

                <h:form id="PostagemListForm">                    

                    <p:dataGrid id="datalist"  value="#{postagemController.timeLine}" var="itemAtual" columns="1" emptyMessage="Nenhuma postagem adicionada" paginator="false" rows="5">

                        <p:panel header="#{itemAtual.titulo}" toggleable="true" toggleTitle="Detalhes" collapsed="true">

                            <h:outputText value="#{itemAtual.conteudo}" escape="false"/>

                            <p:dataList id="videosDatalist" type="none" value="#{itemAtual.videosPostagems}" var="vpa" emptyMessage="Nenhum vídeos para esta postagem" paginator="true" rows="1" rendered="#{!itemAtual.videosPostagems.isEmpty()}">
                                <p:panel header="#{vpa.videos.descricao}">

                                    <center>
                                        <iframe width="340"
                                                height="260"
                                                src="//www.youtube.com/embed/#{vpa.videos.link}?feature=player_embedded"
                                                frameborder="0"
                                                allowfullscreen="true">
                                        </iframe>                                  
                                    </center>
                                    <f:facet name="footer">
                                        <p:commandButton value="excluir" actionListener="#{videosPostagemController.destroy}" update=":PostagemListForm:datalist:videosDatalist">
                                            <f:setPropertyActionListener target="#{videosPostagemController.selected}" value="#{vpa}"/>
                                        </p:commandButton>
                                    </f:facet>
                                </p:panel>

                            </p:dataList >

                            <f:facet name="footer" rendered="#{itemAtual.usuario!= usuarioSessionController.selected.id}">

                                <p:commandButton icon="ui-icon-trash" action="#{postagemController.destroy}"  update="datalist" disabled="#{itemAtual.usuario!=usuarioSessionController.selected.id}">
                                    <f:setPropertyActionListener target="#{postagemController.selected}" value="#{itemAtual}"/>
                                </p:commandButton>

                                <p:outputLabel value=" | "/>

                                <p:commandButton icon="ui-icon-pencil" update=":PostagemEditForm" oncomplete="PF('PostagemEditDialog').show()" disabled="#{itemAtual.usuario!=usuarioSessionController.selected.id}">
                                    <f:setPropertyActionListener target="#{postagemController.selected}" value="#{itemAtual}"/>
                                </p:commandButton>

                                <p:outputLabel value=" | "/>

                                <p:commandButton icon="ui-icon-plus" actionListener="#{videosPostagemController.prepareCreate}" update=":VideosPostagemCreateForm" oncomplete="PF('VideosPostagemCreateDialog').show()" disabled="#{itemAtual.usuario!=usuarioSessionController.selected.id}">
                                    <f:setPropertyActionListener target="#{videosPostagemController.selected.postagem}" value="#{itemAtual}"/>
                                </p:commandButton>

                                <p:outputLabel value=" | "/>

                                <p:outputLabel value="Autor: #{usuarioSessionController.getUsuario(itemAtual.usuario).nome} em "/>
                                <h:outputFormat value="#{itemAtual.data}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputFormat>                                                        

                            </f:facet>
                        </p:panel>                                 
                    </p:dataGrid>                                    
                </h:form>        

            </p:layoutUnit>
        </p:layout>
        <!-- INCLUDES PARA POSTAGEM -->
        <ui:include src="/private/professor/postagem/Create.xhtml"/>
        <ui:include src="/private/professor/postagem/Edit.xhtml"/>
        <ui:include src="/private/professor/postagem/View.xhtml"/>
        <ui:include src="/private/professor/videosPostagem/Create.xhtml"/>
    </h:body>
</html>

